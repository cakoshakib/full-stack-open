{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonsForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","personObject","post","id","delete","put","Filter","handleFilterChange","newFilter","onChange","value","PersonForm","addPerson","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","DeleteButton","person","handleDelete","onClick","Persons","names","map","name","number","Notification","message","error","notiStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","useState","persons","setPersons","setNewName","setNewNumber","setNewFilter","noti","newNoti","useEffect","console","log","personService","personData","resetMessage","setTimeout","numsToShow","filter","toLowerCase","includes","event","target","preventDefault","window","confirm","currentPerson","find","p","updatedObject","returnedNote","updateNumber","concat","catch","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b30d9f85.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = personObject => {\n    const request = axios.post(baseUrl, personObject)\n    return request.then(response => response.data)\n} \n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst updateNumber = (id, personObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, personObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, deletePerson, updateNumber }\n","import React from 'react'\n\nconst Filter = ({handleFilterChange, newFilter}) => \n  <p>filter shown with <input onChange={handleFilterChange} value={newFilter}/></p>\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({\n  addPerson, handleNameChange, handleNumberChange, newName, newNumber\n}) => (\n  <form onSubmit={addPerson}>\n    <div>\n      name: <input onChange={handleNameChange} value={newName}/>\n    </div>\n    <div>\n      number: <input onChange={handleNumberChange} value={newNumber}/>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>   \n    </div>\n  </form>\n)\n\nexport default PersonForm","import React from 'react'\n\nconst DeleteButton = ({ person, handleDelete }) => (\n  <button onClick={() => handleDelete(person)}>delete</button>\n)\nconst Persons = ({ names, handleDelete }) => \n  names.map(person => \n    <div>\n      {person.name} {person.number}\n      <DeleteButton person={person} handleDelete={handleDelete}/>\n    </div>\n  )\n\nexport default Persons\n","import React from 'react'\n\nconst Notification = ({ message, error }) => {\n  if(message === null) {\n    return null;\n  }\n  \n  const notiStyle = {\n    color: error ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n  \n  return (\n    <div style={notiStyle}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonsForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter ] = useState('')\n  const [ noti, newNoti ] = useState({message:null, error:false})\n  \n  useEffect(() => {\n    console.log('effect')\n    personService\n      .getAll()\n      .then(personData => {\n        console.log(personData)\n        setPersons(personData)\n      })\n  }, [])\n\n  console.log(persons)\n  \n  const resetMessage = () => {\n    setTimeout(() => {\n      newNoti({message:null, error:false})\n    }, 5000)\n  }\n  \n  const updateNumber = () => {\n    const currentPerson = persons.find(p => p.name === newName)\n    const updatedObject = {...currentPerson, number: newNumber}\n    \n    personService\n      .updateNumber(currentPerson.id, updatedObject)\n      .then (returnedNote =>\n        setPersons(persons.map(p => p.name === newName ? returnedNote : p))\n      )\n    \n    newNoti({\n      message:`${currentPerson.name}'s number changed to ${newNumber}`,\n      error:false\n    })\n    resetMessage()\n  }\n  \n  const addPerson = (event) => {\n    event.preventDefault()\n    if(persons.map(person => person.name).includes(newName)) {\n      if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`))\n        updateNumber()\n      return\n    }\n    \n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    personService \n      .create(personObject)\n      .then(personData => {\n        setPersons(persons.concat(personData))\n        setNewName('')\n        setNewNumber('')\n        newNoti({message:`Added ${newName}`, error:false})\n        resetMessage()\n      })\n      .catch(error => {\n        newNoti({\n          message:error.response.data.error,\n          error:true\n        })\n        resetMessage()\n        console.log(error.response.data.error)\n      })\n  }\n  \n  const deletePerson = (person) => {\n    if(window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .deletePerson(person.id)\n        .catch(error => {\n          newNoti({\n            message:`Information of ${person.name} has already been removed from server`, \n            error:true\n          })\n          console.log(error)\n          resetMessage()\n        })\n      setPersons(persons.filter(p => p.id !== person.id))\n    }\n  }\n  \n  const handleNameChange = (event) => setNewName(event.target.value)\n  \n  const handleNumberChange = (event) => setNewNumber(event.target.value)\n  \n  const handleFilterChange = (event) => setNewFilter(event.target.value)\n  \n  const numsToShow = newFilter !== '' \n    ? (persons.filter(person => person.name.toLowerCase().includes(newFilter)))\n    : persons\n  \n  return (\n    <div>\n      <Notification message={noti.message} error={noti.error}/>\n      <h2>Phonebook</h2>\n      <Filter handleFilterChange={handleFilterChange} newFilter={newFilter}/>\n\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName} \n        newNumber={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      <Persons names={numsToShow} handleDelete={deletePerson}/>\n    </div>\n  )\n\n}\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);"],"sourceRoot":""}